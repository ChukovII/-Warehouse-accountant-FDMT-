{% extends "base.html" %}
{% load static %} {# –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å—Ç–∞—Ç–∏–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è CSS, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è #}

{% block content %}

<div class="mt-5">
    <h1 class="mb-4">
        üì¶ –£—á–µ—Ç —Å–∫–ª–∞–¥–∞
        <a href="{% url 'material_create' %}" class="btn btn-success ms-3">–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</a>
    </h1>

    <div class="card shadow">
        <div class="card-body">

            <table class="table table-hover table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–ê—Ä—Ç–∏–∫—É–ª</th>
                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        <th>–ï–¥. –∏–∑–º.</th>
                        <th>–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏</th>
                        <th>–ü–æ—Ä–æ–≥</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for material in materials %}

                    {# –ê–ë–°–û–õ–Æ–¢–ù–û –ù–ê–î–ï–ñ–ù–´–ô –ú–ï–¢–û–î: –ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ —á–µ—Ä–µ–∑ WITH/ENDWITH #}
                    {# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WITH/ENDWITH –≤ –∫–∞–∂–¥–æ–π –≤–µ—Ç–∫–µ IF/ELIF –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ —Ç–µ–≥–∞ #}
                    {% if material.current_quantity == 0 %}
                        {% with row_class='table-danger' %}{% endwith %}
                    {% elif material.current_quantity < material.min_threshold %}
                        {% with row_class='table-warning' %}{% endwith %}
                    {% else %}
                        {% with row_class='table-light' %}{% endwith %}
                    {% endif %}

                    <tr class="{{ row_class }}">
                        <td>{{ material.name }}</td>
                        <td>{{ material.article_number|default:"-" }}</td>
                        <td>{{ material.category.name|default:"-" }}</td>
                        <td>
                            {{ material.current_quantity }}
                            {% if material.current_quantity <= material.min_threshold %}
                                <span class="badge bg-danger ms-2">–ú–∞–ª–æ!</span>
                            {% endif %}
                        </td>
                        <td>{{ material.unit }}</td>
                        <td>{{ material.expiration_date|default:"-" }}</td>
                        <td>{{ material.min_threshold }}</td>
                        <td>
                            <a href="{% url 'material_history' material.pk %}" class="btn btn-sm btn-info me-2">–ò—Å—Ç–æ—Ä–∏—è</a>
                            <a href="{% url 'material_update' material.pk %}" class="btn btn-sm btn-warning me-2">–ò–∑–º–µ–Ω–∏—Ç—å</a>
                            <a href="{% url 'material_delete' material.pk %}" class="btn btn-sm btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="8" class="text-center">–°–∫–ª–∞–¥ –ø—É—Å—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>
    </div>
</div>

{% endblock content %}